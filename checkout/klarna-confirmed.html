{Helper(
	file: 'checkout/header',
	or: '<h1>Header not found. Add header to "/checkout/header.html"</h1>'
)}
<div id="MultiPageCheckout" class="clearfix">

	<div id="KlarnaThanksHeader" class="clearfix">
		<h1>{%Hi} {OrderFirstName},</h1>

		<p class="Big">{%KlarnaCheckoutThanks} <a id="KlarnaCheckoutThanksLink" href="/checkout/thanks/"><strong>{%KlarnaCheckoutGoToSummary}</strong></a>.</p>

		{CheckoutRegistrationForm(
			before: '
				<p class="Big">
					{%CheckoutThanksRegistration} {%CheckoutThanksRegistrationSubscriptions}
				</p>
				<p class="Big">
					<a class="Button" title="{%CheckoutCreateAccount}" id="DisplayCheckoutForm" href="#CheckoutThanksRegistrationForm">{%CheckoutCreateAccount}</a>
				</p>
				<form action="/account/register/" method="post" id="CheckoutThanksRegistrationForm" class="BlockForm">
					<p>{%CheckoutCreateAccountInfo}</p>
			',
			after: '<div class="FormItem FormSubmit">
						<button type="submit" class="SubmitButton">{%CheckoutCreateAccount}</button>
					</div>
				</form>'
		)}

		<div id="MarketingPermissions">{MarketingPermissions}</div>

	</div>

	<div id="KlarnaCheckoutWrapper">
		{KlarnaCheckout}
	</div>

</div>
<script type="text/javascript">

	window.onload = function() {
		// Making the Klarna Checkout more plug and play.
		// Adding of essential scripts and dictionary variables.

		var mcf = window.mcf || {};
		mcf.Lang = mcf.Lang || {};
		mcf.Lang.CommentSaved = '{\%CheckoutSuccessCommentSaved}';

		mcf.addScriptToPage = function(scriptSrc) {
			var script = document.createElement('script');
			script.type = 'text/javascript';
			script.src = scriptSrc;
			document.getElementsByTagName('head')[0].appendChild(script);
		};

		if (typeof jQuery !== 'undefined') {
			if (parseFloat(jQuery.fn.jquery) < 1.7) {
				mcf.addScriptToPage('//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js');
			}
		} else {
			mcf.addScriptToPage('//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js');
		}

		if (typeof mcf.updateKlarnaCheckoutFrame !== 'function') {
			mcf.addScriptToPage('{ThemeUrl}/js/mcf.klarnacheckout.js');
		}

	}
</script>
{Helper(
	file:'checkout/footer',
	or: '<h1>Footer not found. Add footer to "/checkout/footer.html"</h1>'
)}
